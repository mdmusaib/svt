(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[9],{1021:function(e,t,a){"use strict";a.r(t);var n=a(674),i=a(110),c=a.n(i),r=a(159),d=a(648),l=a(1),o=a(801),s=a(1017),u=a(985),b=a(1004),j=a(668),h=(a(681),a(727),a(728)),p=a(905),O=a.n(p),f=a(923),x=a.n(f),m=a(20),v=function(){var e=Object(l.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1];Object(l.useRef)();return Object(m.jsx)("div",{className:"file_upload",children:Object(m.jsxs)(x.a,{style:{paddingTop:20,paddingLeft:180},children:[Object(m.jsxs)(u.a,{children:[Object(m.jsx)(b.a,{span:5,children:Object(m.jsx)("label",{children:"DC CHALAN *"})}),Object(m.jsx)(b.a,{span:11,children:Object(m.jsx)("input",{placeholder:"No",id:"name"})})]}),Object(m.jsxs)(u.a,{children:[Object(m.jsx)(b.a,{span:5,children:Object(m.jsx)("label",{children:"Images *"})}),Object(m.jsx)(b.a,{span:11,children:Object(m.jsx)("input",{type:"file",multiple:"true",class:"form-control-file border",id:"images",onChange:function(e){return t=e.target.files,void n(t[0]);var t}})})]}),Object(m.jsx)(b.a,{span:11,children:Object(m.jsx)(j.a,{style:{marginLeft:"80%",marginTop:"5px"},type:"primary",danger:!0,htmlType:"submit",onClick:function(e){e.preventDefault();var t=new FormData,n=document.getElementById("name").value;t.append("image",a),t.append("name",n),O.a.post("https://logistic.svtinfra.com/api/uploadFile",t).then((function(e){console.log("res",e)}))},children:"Submit"})})]})})},g=a(665);o.a.Option,t.default=function(e){var t,a=s.a.useForm(),i=Object(d.a)(a,1)[0],o=Object(l.useRef)(),p=Object(g.a)(),O=Object(l.useState)([]),f=Object(d.a)(O,2),x=(f[0],f[1]),y=Object(l.useState)([]),w=Object(d.a)(y,2),I=w[0],S=w[1];Object(l.useEffect)((function(){window.matchMedia("(min-width: 768px)").matches&&(o.current.style.padding="20px 60px")}),[]),Object(l.useEffect)((function(){var t;"view"===(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.type)&&(i.setFieldsValue(e.location.record),x(JSON.parse(e.location.record.items)),S(e.location.record.vehicle_details))}),[null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.type]);var _=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={vehicle_details:I},console.log("upload",a),e.next=4,p.invoke({endPoint:"https://logistic.svtinfra.com/api/addBooking",method:"post",data:a});case 4:1===(n=e.sent).status?(i.resetFields(),S([])):alert("Something Went Wroung You Booking Couldn`t able to create!"),console.log("called",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{ref:o,style:{padding:"20px 10px"},children:[Object(m.jsx)(v,{}),Object(m.jsxs)(u.a,{children:[Object(m.jsx)(h.a,{getTableData:function(e){var t=Object(n.a)(e),a=t.pop();if(parseInt(a.rate)&&parseInt(a.weight)){var i=parseInt(a.rate)*parseInt(a.weight);a.total_amount=i}if("yes"===a.gst&&a.total_amount){var c=a.total_amount+5*a.total_amount/100;a.total_amount=c.toFixed(2)}console.log("data",t,a),S([].concat(Object(n.a)(t),[a]))},rowData:I,view:"view"===e.location.type}),Object(m.jsx)("hr",{}),"view"===e.location.type?"":Object(m.jsxs)(u.a,{gutter:16,children:[Object(m.jsx)(b.a,{children:Object(m.jsx)(s.a.Item,{children:Object(m.jsx)(j.a,{onClick:_,type:"primary",danger:!0,htmlType:"submit",children:"Submit"})})}),Object(m.jsx)(b.a,{children:Object(m.jsx)(j.a,{onClick:function(){i.resetFields(),x([])},children:"Reset"})})]})]})]})}},727:function(e,t,a){"use strict";var n=a(674),i=a(163),c=a(164),r=a(166),d=a(165),l=a(110),o=a.n(l),s=a(159),u=a(162),b=a(48),j=a(648),h=a(160),p=a(1),O=a.n(p),f=a(1017),x=a(1019),m=a(1025),v=a(668),g=a(1015),y=a(1026),w=a(20),I=O.a.createContext(null),S=function(e){e.index;var t=Object(h.a)(e,["index"]),a=f.a.useForm(),n=Object(j.a)(a,1)[0];return Object(w.jsx)(f.a,{form:n,component:!1,children:Object(w.jsx)(I.Provider,{value:n,children:Object(w.jsx)("tr",Object(b.a)({},t))})})},_=function(e){var t=e.title,a=e.editable,n=e.children,i=e.dataIndex,c=e.record,r=e.handleSave,d=Object(h.a)(e,["title","editable","children","dataIndex","record","handleSave"]),l=Object(p.useState)(!1),O=Object(j.a)(l,2),m=O[0],v=O[1],g=Object(p.useRef)(null),y=Object(p.useContext)(I);Object(p.useEffect)((function(){m&&g.current.focus()}),[m]);var S=function(){v(!m),y.setFieldsValue(Object(u.a)({},i,c[i]))},_=function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:t=e.sent,S(),r(Object(b.a)(Object(b.a)({},c),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),k=n;return a&&(k=m?Object(w.jsx)(f.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(w.jsx)(x.a,{ref:g,onPressEnter:_,onBlur:_})}):Object(w.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:S,children:n})),Object(w.jsx)("td",Object(b.a)(Object(b.a)({},d),{},{children:k}))};O.a.Component},728:function(e,t,a){"use strict";var n=a(674),i=a(163),c=a(164),r=a(166),d=a(165),l=a(162),o=a(110),s=a.n(o),u=a(159),b=a(48),j=a(648),h=a(160),p=a(1),O=a.n(p),f=a(801),x=a(1017),m=a(1019),v=a(1025),g=a(668),y=a(1015),w=a(1026),I=(a(729),a(665)),S=a(20),_=O.a.createContext(null),k=f.a.Option,C=function(e){e.index;var t=Object(h.a)(e,["index"]),a=x.a.useForm(),n=Object(j.a)(a,1)[0];return Object(S.jsx)(x.a,{form:n,component:!1,children:Object(S.jsx)(_.Provider,{value:n,children:Object(S.jsx)("tr",Object(b.a)({},t))})})},D=function(e){var t=e.title,a=e.editable,n=e.children,i=e.dataIndex,c=e.record,r=e.handleSave,d=Object(h.a)(e,["title","editable","children","dataIndex","record","handleSave"]),o=Object(p.useState)(!1),O=Object(j.a)(o,2),v=O[0],g=O[1],y=Object(p.useRef)(null),w=Object(p.useContext)(_),C=Object(I.a)();Object(p.useEffect)((function(){v&&y.current.focus()}),[v]);var D=Object(p.useState)([]),N=Object(j.a)(D,2),q=N[0],F=N[1];Object(p.useEffect)((function(){T()}),[]);var T=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.invoke({endPoint:"http://localhost:8000/api/customers",method:"get"});case 2:t=e.sent,F(t),console.log("response",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){g(!v),w.setFieldsValue(Object(l.a)({},i,c[i]))},P=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.validateFields();case 3:t=e.sent,E(),r(Object(b.a)(Object(b.a)({},c),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=n;if(a)if(v)switch(i){case"party_name":R=Object(S.jsx)(x.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(S.jsx)(f.a,{ref:y,onChange:P,children:q.map((function(e){return Object(S.jsx)("option",{value:"".concat(e.name),children:e.name})}))})});break;case"gst":R=Object(S.jsx)(x.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(S.jsxs)(f.a,{ref:y,onChange:P,children:[Object(S.jsx)(k,{value:"yes",children:"YES"}),Object(S.jsx)(k,{value:"no",children:"NO"})]})});break;default:R=Object(S.jsx)(x.a.Item,{style:{margin:0},name:i,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(S.jsx)(m.a,{ref:y,onPressEnter:P,onBlur:P})})}else R=Object(S.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E,children:n});return Object(S.jsx)("td",Object(b.a)(Object(b.a)({},d),{},{children:R}))},N=function(e){Object(r.a)(a,e);var t=Object(d.a)(a);function a(e){var c;return Object(i.a)(this,a),(c=t.call(this,e)).handleDelete=function(e){var t=Object(n.a)(c.state.dataSource);c.setState({dataSource:t.filter((function(t){return t.key!==e}))})},c.handleAdd=function(){var e=c.state,t=e.count,a=e.dataSource,i={key:t,vehicle_no:"",dc_no:"",from_loc:"",to_loc:"",material:"",party_name:"",rate:"",scale:"",weight:"",gst:"",payment_type:"",diesel_rt:"",diesel_qty:"",loading_quantity:"",accepted_quantity:"",logistic_rent:"",lead:"",date:"",puc:"",total_amount:"",expences:"",driver_name:"",profit:""};c.setState({dataSource:[].concat(Object(n.a)(a),[i]),count:t+1})},c.handleSave=function(e){var t=Object(n.a)(c.state.dataSource),a=t.findIndex((function(t){return e.key===t.key})),i=t[a];t.splice(a,1,Object(b.a)(Object(b.a)({},i),e)),c.setState({dataSource:t},(function(){return c.props.getTableData(c.state.dataSource)}))},c.columns=[{title:"* Vehicle No",dataIndex:"vehicle_no",editable:!0,width:"200"},{title:"* DC.NO",dataIndex:"dc_no",editable:!0,width:"200"},{title:"* From",dataIndex:"from_loc",editable:!0,width:"200"},{title:"* To",dataIndex:"to_loc",editable:!0,width:"200"},{title:"* Material",dataIndex:"material",editable:!0,width:"200"},{title:"* Party Name",dataIndex:"party_name",editable:!0,width:"200"},{title:"* Rate",dataIndex:"rate",editable:!0,width:"200"},{title:"* Weight",dataIndex:"weight",editable:!0,width:"200"},{title:"* GST",dataIndex:"gst",editable:!0,width:"200"},{title:"* Payment Type",dataIndex:"payment_type",editable:!0,width:"200"},{title:"* Diseal Rate",dataIndex:"diesel_rt",editable:!0,width:"200"},{title:"* Diseal Qty",dataIndex:"diesel_qty",editable:!0,width:"200"},{title:"* Loading Quantity",dataIndex:"loading_quantity",editable:!0,width:"200"},{title:"* Accepted Quantity",dataIndex:"accepted_quantity",editable:!0,width:"200"},{title:"* Logistic Rent",dataIndex:"logistic_rent",editable:!0,width:"200"},{title:"* Lead",dataIndex:"lead",editable:!0,width:"200"},{title:"* Date",dataIndex:"date",editable:!0,width:"200"},{title:"* PUC",dataIndex:"puc",editable:!0,width:"200"},{title:"* Expences",dataIndex:"expences",editable:!0,width:"200"},{title:"* Driver Name",dataIndex:"driver_name",editable:!0,width:"200"},{title:"* Profit",dataIndex:"profit",editable:!0,width:"200"},{title:"* Tot Amt",dataIndex:"total_amount",editable:!0,width:"200"},{title:"",dataIndex:"operation",render:function(e,t){return c.state.dataSource.length>=1?Object(S.jsx)(v.a,{title:"Sure to delete?",onConfirm:function(){return c.handleDelete(t.key)},children:Object(S.jsx)(w.a,{style:{color:"black"}})}):null}}],c.state={dataSource:[],count:2},c}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.rowData)!==JSON.stringify(this.props.rowData)&&this.setState({dataSource:this.props.rowData})}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:C,cell:D}},n=this.columns.map((function(t){return t.editable?Object(b.a)(Object(b.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave,width:t.width}}}):t}));return Object(S.jsxs)("div",{style:{width:"100%"},children:[this.props.view?"":Object(S.jsx)(g.a,{onClick:this.handleAdd,type:"primary",style:{marginBottom:16},children:"Add a row"}),Object(S.jsx)(y.a,{components:a,className:"editingTable",rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t,columns:n,pagination:!1,scroll:{x:4200}})]})}}]),a}(O.a.Component);t.a=N},729:function(e,t,a){}}]);
//# sourceMappingURL=9.c74cdc2f.chunk.js.map